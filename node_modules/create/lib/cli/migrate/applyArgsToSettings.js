export function applyArgsToSettings(args, preset, settings) {
    const blocks = settings?.blocks ?? {};
    const remove = blocks.remove ?? [];
    const presetBlocks = new Map(preset.blocks
        .filter((block) => block.about?.name)
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        .map((block) => [block.about.name, block]));
    const removedBlocks = [];
    for (const arg of args) {
        const match = /--exclude-(\w+)/.exec(arg);
        if (!match?.[1]) {
            continue;
        }
        const removedBlock = presetBlocks.get(match[1]);
        if (removedBlock) {
            return new Error(`Block exclusion doesn't match any known block: ${arg}.`);
        }
    }
    return {
        ...settings,
        blocks: Array.from(new Set([removedBlocks, ...remove])),
    };
}
//# sourceMappingURL=applyArgsToSettings.js.map